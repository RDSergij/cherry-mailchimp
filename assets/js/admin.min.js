function genereateShortcode(e){var r,c=(e.data("input_mask"),e.data("shortcode")),i=e.data("type"),t=jQuery(".cherry-sg-popup_fields",e),a=t.serializeArray();return r="["+c,jQuery.each(a,function(e,c){r+=" "+c.name+'="'+c.value+'"'}),r+="]","single"!==i&&(r+="[/"+c+"]"),r}function pasteShortcode(e,r){var c=genereateShortcode(e);r.val(c)}function cherryMailchimpGeneratorView(){jQuery.post(window.cherryMailchimpParam.ajaxurl,{action:"cherry_mailchimp_generator_view"},function(e){jQuery("#cherry-mailchimp-generate-view").html(e),jQuery(".cherry-sg-open").magnificPopup({type:"inline",preloader:!1,focus:"#name",callbacks:{open:function(){var e=jQuery("#generated-shortcode",this.content),r=this.content;jQuery(window).trigger("cherry-ui-elements-init",{target:r}),pasteShortcode(r,e),r.on("change blur",function(){pasteShortcode(r,e)}),r.on("click",".cherry-switcher-wrap",function(){pasteShortcode(r,e)}),jQuery(".cherry-slider-unit").on("slidechange",function(){pasteShortcode(r,e)})}}})})}function noticeCreate(e,r){function c(){var e=100;jQuery(jQuery(".notice-box").get().reverse()).each(function(){jQuery(this).css({top:e}),e+=jQuery(this).outerHeight(!0)})}var i,t=jQuery('<div class="notice-box '+e+'"><span class="dashicons"></span><div class="inner">'+r+"</div></div>"),a=0;jQuery("#cherry-mailchimp-option").append(t),c(),a=-1*(t.outerWidth(!0)+10),t.css({right:a}),i=setTimeout(function(){t.css({right:10}).addClass("show-state")},100),i=setTimeout(function(){a=-1*(t.outerWidth(!0)+10),t.css({right:a}).removeClass("show-state")},4e3),i=setTimeout(function(){t.remove(),clearTimeout(i)},4500)}jQuery(document).ready(function(){jQuery("#cherry-mailchimp-options-save").click(function(){var e=jQuery("#cherry-mailchimp-option"),r=e.serialize();jQuery(this).find("div").addClass("active"),jQuery(this).addClass("right-spiner"),jQuery.post(window.cherryMailchimpParam.ajaxurl,r,function(r){var c="",i="";e.find("#cherry-mail-chimp-message").removeClass("cherry-message-success"),e.find("#cherry-mail-chimp-message").removeClass("cherry-message-failed"),c=r.message?r.message:window.cherryMailchimpParam.default_error_message,i=r.type?r.type:"error",r.connect_status?(jQuery("#cherry-mail-chimp-connect").removeClass("text-danger"),jQuery("#cherry-mail-chimp-connect").removeClass("text-success"),jQuery("#cherry-mail-chimp-connect").addClass("text-"+r.connect_status)):(jQuery("#cherry-mail-chimp-connect").removeClass("text-success"),jQuery("#cherry-mail-chimp-connect").addClass("text-danger")),jQuery("#cherry-mail-chimp-connect").html(r.connect_message?"("+r.connect_message+")":"("+window.cherryMailchimpParam.default_disconnect_message+")"),noticeCreate(i,c),jQuery("#cherry-mailchimp-options-save").find("div").removeClass("active"),jQuery("#cherry-mailchimp-options-save").removeClass("right-spiner"),cherryMailchimpGeneratorView()})})});